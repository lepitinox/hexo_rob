<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="rob_teleeop">
    <xacro:arg name="gazebo" default="false"/>

    <xacro:include filename="$(find rob_teleeop)/finger.urdf.xacro" />
    <xacro:property name="M_PI" value="3.14159"/>

    <link name="base_link">
        <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="file:///$(find rob_teleeop)/robot_nano_hand_base.stl" scale="1 1 1"/>
            </geometry>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 1.57"/>
            <geometry>
                <mesh filename="file:///$(find rob_teleeop)/robot_nano_hand_base.stl" scale="1 1 1"/>
            </geometry>
        </collision>
        <!-- Add definition for all missing variable -->
    </link>
    <!-- Palm link -->
    <link name="palm_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 1.57"/>
            <geometry>
                <mesh filename="file:///$(find rob_teleeop)/robot_nano_hand_palm.stl" scale="1 1 1"/>
            </geometry>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 1.57"/>
            <geometry>
                <mesh filename="file:///$(find rob_teleeop)/robot_nano_hand_palm.stl" scale="1 1 1"/>
            </geometry>
        </collision>
    </link>

    <!-- Palm joint -->
    <joint name="handle_joint" type="revolute">
        <axis xyz="1 0 0" />
        <limit effort="0" velocity="0" lower="0" upper="50" />
        <origin xyz="0 0 0.10" rpy="0 0 0" />
        <parent link="base_link" />
        <child link="palm_link" />
    </joint>

    <!-- Macro finger -->
    <xacro:finger parent="palm_link" prefix="finger1" link="1" joint_type="fixed" xyz="0.015141 -0.034337 0.105315" rpy="-4.22 1.68 5.35" rot="0 0 1.57"/>
    same but rpy in radian using M_PI as pi and 

    <xacro:finger parent="finger1_link" prefix="finger2" link="2" joint_type="fixed" xyz="-0.002487 0 0" rpy="${0.157} ${-0.002-1.57} 1.567" rot="0 -1.57 1.57"/>

    <xacro:finger parent="finger2_link" prefix="finger3" link="3" joint_type="fixed" xyz="-0.040844 0.000126 0.00357" rpy="${(8.94359 / 160) * M_PI} ${(0.091051 / 160) * M_PI} ${(90+89.9831 / 160) * M_PI }" rot = "0 -1.57 0"/>

    <xacro:finger parent="finger3_link" prefix="finger4" link="4" joint_type="fixed" xyz="-0.029121 0.000013 0.002736" rpy="${(11.2847 / 160) * M_PI} ${(-0.04374 / 160) * M_PI} ${(89.947 / 160) * M_PI}" rot="0 0 0"/>
</robot>